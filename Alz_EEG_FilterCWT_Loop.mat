% This code is designed to loop the alzheimers analysis sequence (that
% produces CWTs)


close all
clear all
clc

%folder='\\Mac\Home\Desktop\Mourad Lab\Crying\haha\';
% BOBOLA 
folder='C:\Users\Henry\MATLAB\Mourad Lab\AD mouse\bobola data\04-20-21 experiment matlab data (mouse1)\'
% folder='C:\Users\Henry\MATLAB\Mourad Lab\AD mouse\bobola data\5-5-21 MATLAB data\'
% folder='C:\Users\Henry\MATLAB\Mourad Lab\AD mouse\bobola data\5-10-21 MATLAB data\'
% folder='C:\Users\Henry\MATLAB\Mourad Lab\AD mouse\bobola data\5-11-21 MATLAb data\'

% EGUCHI 
% folder='C:\Users\Henry\MATLAB\Mourad Lab\AD mouse\eguchi data\5-18-21 MATLAB data\'
% folder='C:\Users\Henry\MATLAB\Mourad Lab\AD mouse\eguchi data\5-20-21 MATLAB data\'

filePattern = fullfile(folder, '*.mat');
file_list=dir(filePattern);
%%
% %%
% %set parameters
% set_channels=[1 2 3 4 6];
% ch_names={'S1','A1','V1R','V1L','stim'};
% on_stim=3;
% thresh=0.3;
% 
% %create data arrays
% for i=1:length(ch_names)-1
%     peaks.(char(strcat(ch_names(i),'_med')))=[];
%     peaks.(char(strcat(ch_names(i),'_iso')))=[];
%     indx.(char(strcat(ch_names(i),'_med')))=[];
%     indx.(char(strcat(ch_names(i),'_iso')))=[];
% end

% measure each file 
for k=1:length(file_list)    
baseFileName = file_list(k).name;
  fullFileName = fullfile(folder, baseFileName);
  fprintf('Now reading %s\n', fullFileName);
    load(fullFileName)
    Alz_EEG_FilterCWT   
end
